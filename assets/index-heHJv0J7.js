import{u as h,r as t,j as e,i,e as c}from"./vendor-BdRxfA37.js";import{l as f}from"./logo-primary-LCaTwbuc.js";import{d as j,Y as y}from"./YandexAuthButton-dYT-ytyO.js";import{u as v}from"./index-BgnzgmYC.js";function E(){const s=h(),[r,d]=t.useState(""),[o,m]=t.useState(""),[n,u]=t.useState(""),{country:x,setCountry:l}=v();t.useEffect(()=>{j.then(()=>{const a=localStorage.getItem("userCountry");a&&l(a)})},[l]);const p=async()=>{try{const a=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:o})});if(!a.ok)throw new Error("Ошибка авторизации");const g=await a.json();localStorage.setItem("token",g.token),s("/")}catch(a){u(a.message)}};return e.jsxs("div",{className:"max-w-[640px] w-[80%]",children:[e.jsxs("div",{className:"flex flex-col gap-y-4 mb-6 items-center text-center",children:[e.jsx("a",{className:"mb-6",href:"/",children:e.jsx("img",{className:"h-[60px]",src:f,alt:""})}),x=="RU"?e.jsx(y,{}):e.jsxs("div",{className:"h-[40px] w-[183px]",children:[e.jsx("script",{src:"https://accounts.google.com/gsi/client",async:!0}),e.jsx("div",{id:"g_id_onload","data-client_id":"YOUR_GOOGLE_CLIENT_ID","data-login_uri":"https://your.domain/your_login_endpoint","data-auto_prompt":"false"}),e.jsx("div",{className:"g_id_signin","data-type":"standard","data-size":"large","data-theme":"outline","data-text":"sign_in_with","data-shape":"rectangular","data-logo_alignment":"left"})]})]}),e.jsx("hr",{className:"mt-4 mb-4 text-[#dee2e6]"}),e.jsxs("div",{className:"mt-12 mb-4",children:[e.jsx(i,{type:"email",required:!0,radius:"none",className:"mb-12",placeholder:"Введите Email...",variant:"bordered",label:"Email адрес",labelPlacement:"outside",value:r,onChange:a=>d(a.target.value)}),e.jsx(i,{type:"password",radius:"none",placeholder:"Введите пароль...",variant:"bordered",label:"Пароль",labelPlacement:"outside",value:o,onChange:a=>m(a.target.value)}),n&&e.jsx("p",{className:"text-danger-500 mt-2",children:n})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(c,{radius:"sm",className:"w-full mb-4",color:"primary",variant:"solid",onPress:p,children:"Войти"}),e.jsx(c,{className:"w-full mb-4",color:"primary",variant:"ghost",onPress:()=>s("/register"),children:"Регистрация"}),e.jsx("a",{href:"",children:"Забыл пароль"})]})]})}export{E as default};
